
djmount
=======

djmount - mount MediaServers content as a Linux filesystem.
Created 23/04/2005, Rémi Turboult <r3mi@users.sourceforge.net>


This project allows to mount as a Linux filesystem the content 
of MediaServer devices compatible with the UPnP AV protocol.

Djmount discovers automatically all UPnP AV Media Servers on the network,
and make the content available in a directory tree.
An Audio or Video file is rendered as a playlist (.m3u or .ram) which
contains an URL for the file. Therefore only the address of the file
is exported through djmount ; the actual content is streamed through
HTTP when the playlist is accessed by your favorite media player.


Example
-------

(the actual content listed depends on your AV files collection !)

$ djmount /mnt/av

$ cd /mnt/av

$ ls -l
dr-xr-xr-x  3 root root 512 jan  1  2000 SomeMediaServerDeviceName/
dr-xr-xr-x  3 root root 512 jan  1  2000 AnotherMediaServerDeviceName/
-r--r--r--  1 root root 114 jan  1  2000 devices

$ cd SomeMediaServerDeviceName

$ ls -l 
dr-xr-xr-x  5 root root  512 jan  1  2000 browse/
-r--r--r--  1 root root 1749 jan  1  2000 status

$ ls -l browse/
dr-xr-xr-x  14 root root 512 jan  1  2000 Music/
dr-xr-xr-x   5 root root 512 jan  1  2000 Pictures/
dr-xr-xr-x   4 root root 512 jan  1  2000 Videos/

$ ls -l browse/Music/Artists/Tinariwen/
-r--r--r--  1 root root  66 jan  1  2000 Chatma.m3u
-r--r--r--  1 root root 722 jan  1  2000 Chatma.xml
-r--r--r--  1 root root  73 jan  1  2000 Chet Boghassa.m3u
-r--r--r--  1 root root 729 jan  1  2000 Chet Boghassa.xml

$ cat browse/Music/Artists/Tinariwen/Chatma.m3u
#EXTM3U
#EXTINF:336,Chatma
http://192.168.1.100:9000/disk/208.mp3

$ xmms browse/Music/Artists/Tinariwen/Chatma.m3u

$ fusermount -u /mnt/av


Note: the FUSE  kernel module shall be loaded before running djmount 
(otherwise you will get the error: 
"fusermount: fuse device not found, try 'modprobe fuse' first").


Installation
------------

djmount has been tested on the following configurations:

* MandrakeLinux 10.1 (kernel 2.6.8.1-12mdk, gcc 3.4.1), 
  FUSE 2.2.1, 2.3.0 or 2.4.0


1) Prerequisites for compilation:

* the FUSE package : http://fuse.sourceforge.net/ 


2) Use 'make' in this top directory to compile.

3) as root : 'modprobe fuse' to load the FUSE  kernel module

4) To run, simply use the 'djmount/djmount' executable
   (there is no 'make install' yet).


Known Compatible Devices
------------------------

djmount has been tested successfully with the following UPnP AV 
Devices / Media Servers :

* TwonkyVision UPnP Music Server ( http://www.twonkyvision.de )
  versions 2.7.2 and 2.9.1 for Linux are ok

* GMediaServer on Linux ( http://www.nongnu.org/gmediaserver/ )
  versions 0.4.0, 0.5.0 or 0.7.0 ok (version 0.6.0 not working).

* Ahead Nero MediaHome Server ( http://www.nero.com/en/Nero_MediaHome.html )
  included in Nero ultra 6.6

* Microsoft Windows Media Connect 
  ( http://www.microsoft.com/windows/windowsmedia/devices/wmconnect/ )
  requires Windows XP Service Pack 2 (SP2) and .NET FrameWork 1.1. 


This page describes how to share A/V content with some of the above servers :
 http://www.geexbox.org/wiki/index.php/Accessing_to_UPnP_Contents


Although djmount should work with other UPnP AV compliant devices, 
help is needed to test on additional devices.



Implementation
--------------

This project uses the following main libraries :

* the FUSE package ( http://fuse.sourceforge.net/ ), 

* the Linux SDK for UPnP Devices (libupnp), initially created by Intel:
  http://upnp.sourceforge.net/ .
  The "libupnp" directory contains a copy with some mandatory patches.

* the "talloc" library : http://talloc.samba.org/
  A local copy is included in the "talloc" directory for convenience.

* for testing only (test_upnp executable) : "readline" library (optionnal)


The UPnP AV Architecture is described here : 
http://www.upnp.org/standardizeddcps/mediaserver.asp
